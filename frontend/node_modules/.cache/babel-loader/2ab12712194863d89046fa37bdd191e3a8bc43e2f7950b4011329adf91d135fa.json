{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../utils/apiService';// Use authenticated API service\nimport'../styles.css';import'../pfm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Budgets=()=>{const[budgets,setBudgets]=useState([]);const[form,setForm]=useState({name:'',amount:'',description:'',startDate:'',endDate:''});const[editingBudget,setEditingBudget]=useState(null);useEffect(()=>{const fetchBudgets=async()=>{try{const response=await api.get('/budgets');setBudgets(response.data);}catch(error){console.error('Error fetching budgets:',error);}};fetchBudgets();},[]);const handleChange=e=>{const{name,value}=e.target;setForm(prevForm=>({...prevForm,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{if(editingBudget){const response=await api.put(`/budgets/${editingBudget._id}`,form);setBudgets(prev=>prev.map(b=>b._id===editingBudget._id?response.data:b));setEditingBudget(null);}else{const response=await api.post('/budgets',form);setBudgets(prev=>[...prev,response.data]);}setForm({name:'',amount:'',description:'',startDate:'',endDate:''});}catch(err){console.error('Error saving budget:',err);}};const handleEdit=budget=>{setEditingBudget(budget);setForm({name:budget.name,amount:budget.amount,description:budget.description||'',startDate:budget.startDate.split('T')[0],endDate:budget.endDate.split('T')[0]});};const handleDelete=async id=>{try{await api.delete(`/budgets/${id}`);setBudgets(prev=>prev.filter(budget=>budget._id!==id));}catch(error){console.error('Error deleting budget:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"budgets-container\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Budgets\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"budgets-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"budget-form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:editingBudget?'Edit Budget':'Create New Budget'}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:form.name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amount\",value:form.amount,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",value:form.startDate,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"endDate\",value:form.endDate,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:editingBudget?'Update Budget':'Create Budget'})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"budgets-list\",children:budgets.map(budget=>/*#__PURE__*/_jsxs(\"div\",{className:\"budget-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:budget.name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount:\"}),\" $\",budget.amount]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),' ',budget.description||'No description']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Start Date:\"}),' ',new Date(budget.startDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"End Date:\"}),' ',new Date(budget.endDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"budget-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(budget),className:\"action-btn edit-btn\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(budget._id),className:\"action-btn delete-btn\",children:\"Delete\"})]})]},budget._id))})]})]});};export default Budgets;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","Budgets","budgets","setBudgets","form","setForm","name","amount","description","startDate","endDate","editingBudget","setEditingBudget","fetchBudgets","response","get","data","error","console","handleChange","e","value","target","prevForm","handleSubmit","preventDefault","put","_id","prev","map","b","post","err","handleEdit","budget","split","handleDelete","id","delete","filter","className","children","onSubmit","type","onChange","required","Date","toLocaleDateString","onClick"],"sources":["C:/Suresh/Private/Data-Private/EMBA/FinTech/Sem-4-fall-2024/COP/PersonalFinanceManagement/frontend/src/components/Budgets.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../utils/apiService'; // Use authenticated API service\r\nimport '../styles.css';\r\nimport '../pfm.css';\r\n\r\nconst Budgets = () => {\r\n    const [budgets, setBudgets] = useState([]);\r\n    const [form, setForm] = useState({\r\n        name: '',\r\n        amount: '',\r\n        description: '',\r\n        startDate: '',\r\n        endDate: '',\r\n    });\r\n    const [editingBudget, setEditingBudget] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchBudgets = async () => {\r\n            try {\r\n                const response = await api.get('/budgets');\r\n                setBudgets(response.data);\r\n            } catch (error) {\r\n                console.error('Error fetching budgets:', error);\r\n            }\r\n        };\r\n\r\n        fetchBudgets();\r\n    }, []);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setForm((prevForm) => ({ ...prevForm, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            if (editingBudget) {\r\n                const response = await api.put(`/budgets/${editingBudget._id}`, form);\r\n                setBudgets((prev) =>\r\n                    prev.map((b) => (b._id === editingBudget._id ? response.data : b))\r\n                );\r\n                setEditingBudget(null);\r\n            } else {\r\n                const response = await api.post('/budgets', form);\r\n                setBudgets((prev) => [...prev, response.data]);\r\n            }\r\n            setForm({ name: '', amount: '', description: '', startDate: '', endDate: '' });\r\n        } catch (err) {\r\n            console.error('Error saving budget:', err);\r\n        }\r\n    };\r\n\r\n    const handleEdit = (budget) => {\r\n        setEditingBudget(budget);\r\n        setForm({\r\n            name: budget.name,\r\n            amount: budget.amount,\r\n            description: budget.description || '',\r\n            startDate: budget.startDate.split('T')[0],\r\n            endDate: budget.endDate.split('T')[0],\r\n        });\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            await api.delete(`/budgets/${id}`);\r\n            setBudgets((prev) => prev.filter((budget) => budget._id !== id));\r\n        } catch (error) {\r\n            console.error('Error deleting budget:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"budgets-container\">\r\n            <header className=\"header\">\r\n                <h1>Budgets</h1>\r\n            </header>\r\n            <div className=\"budgets-content\">\r\n                {/* Left: Create/Edit Form */}\r\n                <div className=\"budget-form\">\r\n                    <form onSubmit={handleSubmit}>\r\n                        <h2>{editingBudget ? 'Edit Budget' : 'Create New Budget'}</h2>\r\n                        <div className=\"form-group\">\r\n                            <label>Name:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"name\"\r\n                                value={form.name}\r\n                                onChange={handleChange}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>Amount:</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                name=\"amount\"\r\n                                value={form.amount}\r\n                                onChange={handleChange}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>Description:</label>\r\n                            <textarea\r\n                                name=\"description\"\r\n                                value={form.description}\r\n                                onChange={handleChange}\r\n                            ></textarea>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>Start Date:</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                name=\"startDate\"\r\n                                value={form.startDate}\r\n                                onChange={handleChange}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>End Date:</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                name=\"endDate\"\r\n                                value={form.endDate}\r\n                                onChange={handleChange}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <button type=\"submit\" className=\"submit-btn\">\r\n                            {editingBudget ? 'Update Budget' : 'Create Budget'}\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n\r\n                {/* Right: Budgets List */}\r\n                <div className=\"budgets-list\">\r\n                    {budgets.map((budget) => (\r\n                        <div key={budget._id} className=\"budget-card\">\r\n                            <h2>{budget.name}</h2>\r\n                            <p>\r\n                                <strong>Amount:</strong> ${budget.amount}\r\n                            </p>\r\n                            <p>\r\n                                <strong>Description:</strong>{' '}\r\n                                {budget.description || 'No description'}\r\n                            </p>\r\n                            <p>\r\n                                <strong>Start Date:</strong>{' '}\r\n                                {new Date(budget.startDate).toLocaleDateString()}\r\n                            </p>\r\n                            <p>\r\n                                <strong>End Date:</strong>{' '}\r\n                                {new Date(budget.endDate).toLocaleDateString()}\r\n                            </p>\r\n                            <div className=\"budget-actions\">\r\n                                <button onClick={() => handleEdit(budget)} className=\"action-btn edit-btn\">\r\n                                    Edit\r\n                                </button>\r\n                                <button onClick={() => handleDelete(budget._id)} className=\"action-btn delete-btn\">\r\n                                    Delete\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Budgets;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}