{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../utils/apiService';// Authenticated API helper\nimport'../styles.css';import'../pfm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransactionList=()=>{const[transactions,setTransactions]=useState([]);useEffect(()=>{const fetchTransactions=async()=>{try{const response=await api.get('/transactions');setTransactions(response.data);}catch(error){console.error('Error fetching transactions:',error);}};fetchTransactions();},[]);const handleTransactionAdded=newTransaction=>{setTransactions(prev=>[newTransaction,...prev]);};const handleDelete=async id=>{try{console.log(`Deleting transaction with ID: ${id}`);// Debugging log\nawait api.delete(`/transactions/${id}`);setTransactions(prev=>prev.filter(transaction=>transaction._id!==id));}catch(err){var _err$response,_err$response$data;console.error('Error deleting transaction:',((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||err.message);alert('Failed to delete transaction. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"register-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Transaction List\"}),transactions.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No transactions available.\"}):/*#__PURE__*/_jsx(\"ul\",{children:transactions.map(transaction=>/*#__PURE__*/_jsxs(\"li\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[transaction.description,\" - $\",transaction.amount,\" (\",transaction.type,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(transaction._id),className:\"submit-btn\",children:\"Delete\"})]},transaction._id))})]});};export default TransactionList;","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","TransactionList","transactions","setTransactions","fetchTransactions","response","get","data","error","console","handleTransactionAdded","newTransaction","prev","handleDelete","id","log","delete","filter","transaction","_id","err","_err$response","_err$response$data","message","alert","className","children","length","map","description","amount","type","onClick"],"sources":["C:/Suresh/Private/Data-Private/EMBA/FinTech/Sem-4-fall-2024/COP/PersonalFinanceManagement/frontend/src/components/TransactionList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../utils/apiService'; // Authenticated API helper\r\nimport '../styles.css';\r\nimport '../pfm.css';\r\n\r\nconst TransactionList = () => {\r\n    const [transactions, setTransactions] = useState([]);\r\n    useEffect(() => {\r\n        const fetchTransactions = async () => {\r\n            try {\r\n                const response = await api.get('/transactions');\r\n                setTransactions(response.data);\r\n            } catch (error) {\r\n                console.error('Error fetching transactions:', error);\r\n            }\r\n        };\r\n        fetchTransactions();\r\n    }, []);\r\n    const handleTransactionAdded = (newTransaction) => {\r\n        setTransactions((prev) => [newTransaction, ...prev]);\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            console.log(`Deleting transaction with ID: ${id}`); // Debugging log\r\n            await api.delete(`/transactions/${id}`);\r\n            setTransactions((prev) => prev.filter((transaction) => transaction._id !== id));\r\n        } catch (err) {\r\n            console.error('Error deleting transaction:', err.response?.data?.message || err.message);\r\n            alert('Failed to delete transaction. Please try again.');\r\n        }\r\n    };\r\n    \r\n\r\n    return (\r\n        <div className=\"register-container\"  >\r\n            <h2>Transaction List</h2>\r\n            {transactions.length === 0 ? (\r\n                <p>No transactions available.</p>\r\n            ) : (\r\n                <ul>\r\n                    {transactions.map((transaction) => (\r\n                        <li key={transaction._id} className=\"form-group\">\r\n                            <div>\r\n                                {transaction.description} - ${transaction.amount} ({transaction.type})\r\n                            </div>\r\n                            <button onClick={() => handleDelete(transaction._id)} className=\"submit-btn\">\r\n                                Delete\r\n                            </button>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TransactionList;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,GAAG,KAAM,qBAAqB,CAAE;AACvC,MAAO,eAAe,CACtB,MAAO,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpB,KAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CACpDD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAU,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAT,GAAG,CAACU,GAAG,CAAC,eAAe,CAAC,CAC/CH,eAAe,CAACE,QAAQ,CAACE,IAAI,CAAC,CAClC,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACxD,CACJ,CAAC,CACDJ,iBAAiB,CAAC,CAAC,CACvB,CAAC,CAAE,EAAE,CAAC,CACN,KAAM,CAAAM,sBAAsB,CAAIC,cAAc,EAAK,CAC/CR,eAAe,CAAES,IAAI,EAAK,CAACD,cAAc,CAAE,GAAGC,IAAI,CAAC,CAAC,CACxD,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAC,EAAE,EAAK,CAC/B,GAAI,CACAL,OAAO,CAACM,GAAG,CAAC,iCAAiCD,EAAE,EAAE,CAAC,CAAE;AACpD,KAAM,CAAAlB,GAAG,CAACoB,MAAM,CAAC,iBAAiBF,EAAE,EAAE,CAAC,CACvCX,eAAe,CAAES,IAAI,EAAKA,IAAI,CAACK,MAAM,CAAEC,WAAW,EAAKA,WAAW,CAACC,GAAG,GAAKL,EAAE,CAAC,CAAC,CACnF,CAAE,MAAOM,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACVb,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAE,EAAAa,aAAA,CAAAD,GAAG,CAACf,QAAQ,UAAAgB,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcd,IAAI,UAAAe,kBAAA,iBAAlBA,kBAAA,CAAoBC,OAAO,GAAIH,GAAG,CAACG,OAAO,CAAC,CACxFC,KAAK,CAAC,iDAAiD,CAAC,CAC5D,CACJ,CAAC,CAGD,mBACIxB,KAAA,QAAKyB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eAC/B5B,IAAA,OAAA4B,QAAA,CAAI,kBAAgB,CAAI,CAAC,CACxBxB,YAAY,CAACyB,MAAM,GAAK,CAAC,cACtB7B,IAAA,MAAA4B,QAAA,CAAG,4BAA0B,CAAG,CAAC,cAEjC5B,IAAA,OAAA4B,QAAA,CACKxB,YAAY,CAAC0B,GAAG,CAAEV,WAAW,eAC1BlB,KAAA,OAA0ByB,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC5C1B,KAAA,QAAA0B,QAAA,EACKR,WAAW,CAACW,WAAW,CAAC,MAAI,CAACX,WAAW,CAACY,MAAM,CAAC,IAAE,CAACZ,WAAW,CAACa,IAAI,CAAC,GACzE,EAAK,CAAC,cACNjC,IAAA,WAAQkC,OAAO,CAAEA,CAAA,GAAMnB,YAAY,CAACK,WAAW,CAACC,GAAG,CAAE,CAACM,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,QAE7E,CAAQ,CAAC,GANJR,WAAW,CAACC,GAOjB,CACP,CAAC,CACF,CACP,EACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAAlB,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}